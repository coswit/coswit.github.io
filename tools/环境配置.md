### zsh配置

ubuntu安装zsh

```shell
sudo apt install zsh
```

#### ohmyzsh

[ohmyzh安装](https://github.com/ohmyzsh/ohmyzsh)

```shell
wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
sh install.sh
```

安装插件：

```shell
cd ~/.oh-my-zsh/custom/plugins/

# 高亮关键词
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting

# 自动补全
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

# 更加丰富的高亮
git clone https://github.com/zdharma-continuum/fast-syntax-highlighting.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/fast-syntax-highlighting

# 展示自动补全历史
git clone --depth 1 -- https://github.com/marlonrichert/zsh-autocomplete.git $ZSH_CUSTOM/plugins/zsh-autocomplete
```

在~/.zshrc中配置插件：

```shell
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
  fast-syntax-highlighting
  zsh-autocomplete
)
```

在`~/.zshrc`中配置主题

```shell
# 默认使用 robbyrussell，常用 agnoster Bullet-train
ZSH_THEME="agnoster"
```

#### oh-my-posh

https://github.com/JanDeDobbeleer/oh-my-posh

#### powerlevel10k主题

https://github.com/romkatv/powerlevel10k

- 下载

  ```shell
  git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k
  ```

- 在`~/.zshrc`中配置

  ```shell
  ZSH_THEME="powerlevel10k/powerlevel10k"
  ```

- 重新进入配置向导：

  ```shell
  p10k configure
  ```

参考：https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/

### wsl2配置代理

在 `~/.bashrc` 或 `~/.zshrc` 中添加，或者直接执行临时添加：

```shell
export http_proxy="http://<WINDOWS_IP>:<PORT>"
export https_proxy="http://<WINDOWS_IP>:<PORT>"
export all_proxy="socks5://<WINDOWS_IP>:<PORT>"

export all_proxy="http://172.19.16.1:7897"
```

#### git代理

配置执行，或在`~/.gitconfig`中增加下面配置：

```shell
git config --global http.proxy http://172.19.16.1:7897
git config --global https.proxy http://172.19.16.1:7897
```

可能的错误定位：

```shell
# bash中查看要配置的ip
cat /etc/resolv.conf |grep -oP '(?<=nameserver\ ).*' 

# 在powershell中，查看ip
wsl hostname -I 

#测试基础网络连通性
ping 8.8.8.8

#查看域名转化为IP
nslookup github.com
```

测试：

```shell
# 测试 HTTPS 连接
curl -v https://github.com

# 测试 SSH 连接
ssh -T git@github.com
```

#### widows-vpn

window 防火墙 7890 端口放开。 在cmd 命令行执行：

```
netsh advfirewall firewall add rule name="Open Port 7897" dir=in action=allow protocol=TCP localport=7897
```

 Clash 配置

1. Windows 客户端开启 `Allow LAN`（允许局域网连接）
2. 端口查看：Clash 设置 → 端口设置（默认 HTTP:7897, SOCKS5:7891）

#### ssh代理

在`~/.ssh/config`配置：

```shell
Host github.com
	Host github.com
	Hostname ssh.github.com
	Port 443
	User git
	ProxyCommand nc -v -x  172.19.16.1:7897 %h %p
```

### maven配置

maven下载：[Download Apache Maven – Maven](https://maven.apache.org/download.cgi)。配置：

```shell
#系统环境变量配置
MAVEN_HOME  D:\maven
#PATH
%MAVEN_HOME%\apache-maven-3.9.11\bin

#测试
mvn -v
```

gradle配置镜像，[阿里云](https://developer.aliyun.com/mirror/)：

```shell
# gradle-wrapper.properties
distributionUrl=https\://mirrors.aliyun.com/gradle/distributions/v7.4.0/gradle-7.4-bin.zip

#腾讯云
distributionUrl=https://mirrors.cloud.tencent.com/gradle/gradle-8.7-bin.zip
```

#### android本地maven配置

默认位置在`~/.m2/repository`， 在全局配置`${user.home}/.m2/settings.xml`或用户配置`${maven.home}/conf/settings.xml`中增加配置：

```xml
<settings>
  <!-- 其他配置 -->
   <localRepository>D:\maven\repository</localRepository>
</settings>
```

#### 复制到本地maven仓

```groovy
task cacheToMavenLocal(type: Copy) {
    from new File(gradle.gradleUserHomeDir, 'caches/modules-2/files-2.1')
    into repositories.mavenLocal().url
    eachFile {
        List<String> parts = it.path.split('/')
        it.path = (parts[0]+ '/' + parts[1]).replace('.','/') + '/' + parts[2] + '/' + parts[4]
    }
    includeEmptyDirs false
    duplicatesStrategy DuplicatesStrategy.EXCLUDE

}
```

### gradle本地配置

如果不配置gradle路径，默认会放置在`${user.home}/.gradle`，可以手动配置环境变量`GRADLE_USER_HOME`，如Windows下可将值设为`D:\gradle\gradle_user_home`，就会使用手动设置的路径。

修改全局设置：在`~/.gradle/init.gradle`文件中添加：

```groovy
allprojects {
    repositories {
        // 自定义本地仓库路径
        maven {
            url "file:///Users/yourname/Android/local-repo"
        }
        
        // 保留默认本地仓库
        mavenLocal() 
        
        // 其他仓库...
    }
}
```

### powershell7 安装

- 方式一：从 Releases 下载对应 msi 文件进行安装 ：https://github.com/PowerShell/PowerShell/releases

- 方式二：通过 winget 进行安装：winget install Microsoft.PowerShell

F2切换历史查看

### ohmyposh

参考文档：https://ohmyposh.dev/docs

安装命令：

```powershell
winget install JanDeDobbeleer.OhMyPosh --source winget --scope machine --force
```

字体安装：

```powershell
oh-my-posh font install meslo
```

在PowerShell7中使用下面命令创建空白配置文件：

```powershell
New-Item -Path $PROFILE -Type File -Force
# 
 ~\Documents\PowerShell
```

找到`~\Documents\PowerShell\Microsoft.PowerShell_profile.ps1`文件，编辑打开，写入

```
oh-my-posh init pwsh | Invoke-Expression
```

### [NerdFont字体](https://github.com/ryanoasis/nerd-fonts#font-installation)

powershell安装：

```powershell
Install-PSResource -Name NerdFonts
Import-Module -Name NerdFonts
```

Linux安装：

```shell
git clone  https://github.com/ryanoasis/nerd-fonts.git --depth 1 

./install.sh
```

Windows-PowerShell:

```
./install.ps1
```

参考：https://kirigaya.cn/blog/article?seq=28

https://www.taurusxin.com/windows-terminal/

https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/

https://ohmyposh.dev/docs/installation/linux



### wsl中使用adb

```bash
# 1. 在 Windows 中启动 ADB 服务（以管理员身份运行 PowerShell）：
adb kill-server
adb start-server

# 2. 在 WSL2 中设置环境变量（添加到 ~/.bashrc 或 ~/.zshrc）：
export ADB_SERVER=$(grep nameserver /etc/resolv.conf | awk '{print $2}'):5037
alias adb="adb -H $ADB_SERVER"

# 3. 在 WSL2 中使用 ADB：
source ~/.bashrc
adb devices  # 应显示 Windows 检测到的设备
```

