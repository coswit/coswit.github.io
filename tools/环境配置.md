## Linux配置

### apt

```bash
sudo apt install <package_name>
sudo apt remove <package_name>

# 彻底卸载软件包 （包括配置文件）
sudo apt purge <package_name>
apt search <package_name>

# 查看已安装的软件包
apt list --installed

# 清理不再需要的软件包
sudo apt autoremove

# 查看软件包信息
apt show <package_name>
```

apt代理配置，在`vi /etc/apt/apt.conf`文件中:

```bash
Acquire::http::proxy "http://proxy.hk.*.com:8080/";
Acquire::ftp::proxy "ftp://proxy.hk.*.com:8080/";
Acquire::https::proxy "https://proxy.hk.*.com:8080/";
```

c++编译环境配置

```bash
sudo apt update
sudo apt install gdb
gdb --version
sudo apt install cmake 
cmake --version
sudo apt install build-essential
gcc --version
g++ --version
make --version
```

opencv安装

```bash
apt install libopencv-dev
```

#### 换源

```bash
cd /etc/apt/

# 留个source备份
sudo mv sources.list sources.list.backup

# 使用源
sudo vim sources.list
```

写入：（根据ubuntu版本号自己查，如果源的版本和ubuntu版本不一致，那么后续更新就会发生依赖问题。e.g. Ubuntu20.04对应focal-XXX的源）

```
deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse

deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse multiverse
```

移除自带的包（因为可能和国内源的软件有冲突）

```bash
sudo apt remove ubuntu-advantage-tools
```

更新一下：

```bash
sudo apt update
sudo apt upgrade
```

### 代理

#### wsl2代理

在 `~/.bashrc` 或 `~/.zshrc` 中添加，或者直接执行临时添加：

```shell
export http_proxy="http://<WINDOWS_IP>:<PORT>"
export https_proxy="http://<WINDOWS_IP>:<PORT>"

# 有帐号
export http_proxy="http://username:passwd@proxy.*.com:port"

export all_proxy="socks5://<WINDOWS_IP>:<PORT>"

export all_proxy="http://172.19.16.1:7897"
```

或者通过下动态获取配置，端口需要看代理软件使用的端口：

```bash
export hostip=$(cat /etc/resolv.conf | grep -oP '(?<=nameserver\ ).*')
export https_proxy="http://${hostip}:7897"
export http_proxy="http://${hostip}:7897"
```

#### git代理

配置时执行，或在`~/.gitconfig`中增加代理配置：

```shell
#配置
git config --global http.proxy http://username:passwd@proxy.*.com:port
git config --global https.proxy http://username:passwd@proxy.*.com:port
#取消配置
git config --global --unset http.proxy
git config --global --unset https.proxy

npm config delete proxy
```

可能的错误定位：

```shell
# bash中查看要配置的ip
cat /etc/resolv.conf |grep -oP '(?<=nameserver\ ).*' 

# 在powershell中，查看ip
wsl hostname -I 

#测试基础网络连通性
ping 8.8.8.8

#查看域名转化为IP
nslookup github.com
```

测试：

```shell
# 测试 HTTPS 连接
curl -v https://github.com

# 测试 SSH 连接
ssh -T git@github.com
```

#### ssh代理

在`~/.ssh/config`配置：

```bash
Host github.com
	Host github.com
	Hostname ssh.github.com
	Port 443
	User git
	ProxyCommand nc -v -x  172.19.16.1:7897 %h %p
```

#### Android使用代理

在`gradle.properties`文件中配置代理

```bash
systemProp.http.proxyHost=proxy.*.com
systemProp.http.proxyPort=port
systemProp.https.proxyHost=proxy.server
systemProp.https.proxyPort=port

systemProp.http.proxyUser=username
systemProp.http.proxyPassword=password
systemProp.https.proxyUser=username
systemProp.https.proxyPassword=password
```

### Java

jdk安装

```shell
#查看安装版本
$ apt --names-only search "openjdk-.*jre$"
#安装多版本
$ sudo apt install openjdk-11-jdk
$ sudo apt install openjdk-17-jre
#版本切换，选择对应的版本
sudo update-alternatives --config java
```

### Python

3.8 python版本安装

```bash
# 安装必备组件 ： 运行以下命令以安装software-properties-common，这是添加PPA所需的工具
sudo apt install software-properties-common
# 添加Deadsnakes PPA ： 运行以下命令以添加Deadsnakes PPA，这个PPA包含了Python 3.8
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.8
```

pip安装

```bash
sudo apt install python3-pip
pip --version
pip3 install <package_name>
```

永久代理，在`~/.pip/pip.conf`, Windows中该文件在`C:\Users\username\pip\pip.ini`。

```bash
[global]
timeout = 1000
# proxy = http://[username:password@]proxyserver:port
proxy = http://172.19.16.1:7897
index-url= http://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/

[install]
trusted-host=mirrors.tuna.tsinghua.edu.cn
```

临时代理：

```bash
# 配置
pip install --proxy http://172.19.16.1:7897
pip install --proxy https://172.19.16.1:7897
# 取消
pip install --proxy "" package_name
```

### ohmyzsh

ubuntu安装zsh

```bash
sudo apt install zsh
```

[ohmyzh安装](https://github.com/ohmyzsh/ohmyzsh):

```shell
wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
sh install.sh
```

安装插件：

```shell
cd ~/.oh-my-zsh/custom/plugins/

# 高亮关键词
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting

# 自动补全
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

# 更加丰富的高亮
git clone https://github.com/zdharma-continuum/fast-syntax-highlighting.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/fast-syntax-highlighting
```

在~/.zshrc中配置插件：

```shell
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
  fast-syntax-highlighting
)
```

在`~/.zshrc`中配置主题

```shell
# 默认使用 robbyrussell，常用 agnoster Bullet-train
ZSH_THEME="agnoster"
```


## Windows配置

### wsl2

#### wsl2安装

以管理员身份打开windows terminal

```bash
# 开启VM组件 开启后需要重启电脑
Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform

# 查看可用版本
wsl --list --online

# 安装Ubuntu指定版本
wsl --install -d Ubuntu-20.04 

# 设置为wsl2
wsl --set-default-version 2
```

#### wls2配置

wsl使用adb

```bash
sudo ln -s /home/user_name/platform-tools/adb.exe /usr/bin/adb
sudo ln -s /home/user_name/platform-tools/fastboot.exe /usr/bin/fastboot

#查看wsl版本
wsl --list --verbose
```

### git

下载，前往 https://git-scm.com/download/win

wsl中配置git-bash中乱码问题，将commandline位置从`$GIT_INSTALL_DIR\\bin\\bash.exe`修改为了`$GIT_INSTALL_DIR\\usr\\bin\\bash.exe --login -i`

#### wls2中的显示问题

```bash
# 修复 git status 等命令的中文路径显示
git config --global core.quotepath false

# 设置提交信息的编码
git config --global i18n.commitEncoding utf-8
```

### Java

安装Java：https://www.oracle.com/hk/java/technologies/downloads/

### python

```
https://github.com/adang1345/PythonWindows
https://www.python.org/downloads/
```

### 代理

#### widows-vpn

window 防火墙 7890 端口放开。 在cmd 命令行执行：

```
netsh advfirewall firewall add rule name="Open Port 7897" dir=in action=allow protocol=TCP localport=7897
```

 Clash 配置

1. Windows 客户端开启 `Allow LAN`（允许局域网连接）
2. 端口查看：Clash 设置 → 端口设置（默认 HTTP:7897, SOCKS5:7891）


### powershell7 安装

- 方式一：从 Releases 下载对应 msi 文件进行安装 ：https://github.com/PowerShell/PowerShell/releases

- 方式二：通过 winget 进行安装：winget install Microsoft.PowerShell

F2切换历史查看

### ohmyposh

参考文档：https://ohmyposh.dev/docs

配置 powershell，安装powershell插件

```bash
# 允许运行Install-Module脚本
set-executionpolicy remotesigned

# 更新最新版本的PSReadLine，为了自动补全
Install-Module PSReadLine -Force

# 创建powershell 的初始化脚本，点击确认创建即可
notepad $profile

# 安装几个插件
Install-Module posh-git
Install-Module Terminal-Icons
```

安装ohmyposh：

```bash
winget install JanDeDobbeleer.OhMyPosh --source winget --scope machine --force

 winget install JanDeDobbeleer.OhMyPosh -s winget
```

字体安装：

```bash
oh-my-posh font install meslo
```

在PowerShell7中使用下面命令创建空白配置文件：

```powershell
New-Item -Path $PROFILE -Type File -Force
# 
 ~\Documents\PowerShell
```

找到`~\Documents\PowerShell\Microsoft.PowerShell_profile.ps1`文件，编辑打开，写入

```
oh-my-posh init pwsh | Invoke-Expression
```

#### powerlevel10k主题

https://github.com/romkatv/powerlevel10k

- 下载

  ```shell
  git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k
  ```

- 在`~/.zshrc`中配置

  ```shell
  ZSH_THEME="powerlevel10k/powerlevel10k"
  ```

- 重新进入配置向导：

  ```shell
  p10k configure
  ```

参考：https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/

## [NerdFont字体](https://github.com/ryanoasis/nerd-fonts#font-installation)

### Windows安装

powershell安装：

```powershell
Install-PSResource -Name NerdFonts
Import-Module -Name NerdFonts
```

Windows-PowerShell:

```
./install.ps1
```
### Linux安装

全部字体安装，较大，下载慢，可按需选择选择安装

```shell
git clone  https://github.com/ryanoasis/nerd-fonts.git --depth 1 

./install.sh
```

安装部分字体：

```bash
# 只下载提交历史和树对象，不下载文件内容（blob）
git clone --filter=blob:none --sparse git@github.com:ryanoasis/nerd-fonts

# 配置稀疏检出路径（例如只想要 JetBrains Mono 字体）
git sparse-checkout set patched-fonts/JetBrainsMono

git checkout

# 查看结果
ls ~/.local/share/fonts/
```

参考：https://kirigaya.cn/blog/article?seq=28

https://www.taurusxin.com/windows-terminal/

https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/

https://ohmyposh.dev/docs/installation/linux
