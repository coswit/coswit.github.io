### 全排列

从n个不同的元素中, 取r个并按次序排列, 称为从n中取r个的一个排列, 全部这样的排列数记为
P(n, r)或A(n,r)。`Arragement、Permutation`

$ P(n,r) = n(n-1)···(n-r+1) = \frac{n!}{(n-r)!} $

### 组合

从n个不同的元素中, 取r个但是**不考虑次序的组合**, 全部这样的组合总数记为C(n, r)。`Combination`

$ C(n,r) = \dbinom{n}{r} = \frac{P(n,r)}{r!} = \frac{n!}{r!(n-r)!}  $

### 圆周排列

从n个不同的元素中, 取r个沿一圆周排列, 称为从n中取r个的一个**圆周排列**, 全部这样的排列数记为Q(n, r).

> 相当于将圆周从r个点处剪开就是取r的全排列

$  Q(n, r) = \frac{P(n,r)}{r}  $

$  Q(n,n) = (n-1)!  $

例：n对夫妻围一桌，每对夫妻相邻而坐的方案数是$\underline {(n-1)! \times 2^n}$ (夫妻之间可以交换)

### 牛顿二项式公式

$(x+y)^n = \displaystyle\sum_{k=0}^{n} \dbinom{n}{k} x^{n-k} y^k = \displaystyle\sum_{k=0}^{n} \frac{n!}{k!(n-k)!} x^{n-k} y^k $

$(x+y)^ \infty = \displaystyle\sum_{k=0}^{ \infty } \dbinom{\infty }{k} x^{\infty -k} y^k  $

$  (1+x)^n = \displaystyle\sum_{k=0}^n   \dbinom{n}{k} x^k   $

$  (1+ax)^n = \displaystyle\sum_{k=0}^n  \dbinom{n}{k} a^k x^k   $

$(1-x)^{-n} =  \displaystyle\sum_{k=0}^{ \infty } C(n+k-1,k) x^k$

$(1+x)^{-n} =  \displaystyle\sum_{k=0}^{ \infty } C(n+k-1,k) (-1)^k x^k$

>  $  \dbinom{n}{k} = \frac{n!}{k!(n-k)!} = \frac{n(n-1)(n-2)···(n-k+1)}{k!}   $



### 可重组合与不相邻组合
- 可重组合：在n个不同元素中取r个允许重复的组合，其组合数为**C(n+r-1,r)**
- 不相邻组合：从A={1,2,…,n}中取r个作不相邻的组合，其个数为**C(n-r+1,r)**
### 常用组合等式

$C(n,r)=C(n,n-r)$

$C(n,k)=C(n-1,k)+C(n-1,k-1)$

>从{1,2,…,n}中取k个组合的全体可以分为两组：
 A1组：含有元素n，|A1|=C(n-1,k-1)
A2组：不含元素n，|A2|=C(n-1,k)

$C(n+r+1,r)= C(n+r,r)+C(n+r-1,r-1)+C(n+r-2,r-2)+…+ C(n+1,1)+C(n,0)$

$C(n,k)C(k,r)=C(n,r)C(n-r,k-r), (k>r)$



$C(n,0)-C(n,1)+C(n,2)-…+(-1)^nC(n,n)=0$




$C(m+n,r)=C(m,0)C(n,r)+C(m,1)C(n,r-1) +…+ C(m,r)C(n,0) ,  r<min(m,n)$


$C(m+n,m) =C(m,0)C(n,0)+ C(m,1)C(n,1)   +…+ C(m,m)C(n,m), mn$


###  Stirling近似公式

### 母函数

定义：对于序列$C_0,C_1,C_2,...$构造一函数$G(x) = C_0 + C_1x^1 +C_2x^2 +....$称G(x)为序列$C_0,C_1,C_2,...$的母函数。

 组合数学的主要内容是计数，用的最多的计数工具要算母函数

> 母函数就是一列用来展示一串数字序列的挂衣架。— 赫伯特·维尔夫

系数为2的整数倍有特殊关系：$(1+x)(1-x)  = 1-x^2$
$  G(x) = (1+ x)(1+ x^2 )(1+x^4 )(1+ x^8 )(1+ x^{16})(1+ x^{32})
= \frac{1-x^2}{1-x} \frac{1-x^4}{1-x^2}···\frac{1-x^{64}}{1-x^{32}}
= 1 + x + x^2 + ··· + x^{63}   $

#### 线性常系数齐次递推关系

Fibonacci数$\{F_n \}$满足 $ F_n = F_{n-1} + F_{n-2} , F_1 = F_2 =1$

特此方程：$x^2-x-1 =0$

特征根：$\alpha = \frac{1+\sqrt{5}}{2}  , \beta = \frac{1-\sqrt{5}}{2}$

$G(x) = \frac {P(x)}{1-x-x^2} = \frac {P(x)}{(1- \frac{1+\sqrt{5}}{2} x） (1+ \frac{1-\sqrt{5}}{2}x)}  = \frac{A}{1- \alpha x}  + \frac{B}{1-\beta x}$

$= A(1+\alpha x +\alpha ^2 x^2 +....) + B(1+\beta x +\beta ^2 x^2 +....)$

$a_n = A*\alpha ^n+B*\beta^n$

$F_0 = A +B= 0  $

$F_1 = A*\alpha +B*\beta = 1  $

$A = \frac{1}{\sqrt{5}} , B = -\frac{1}{\sqrt{5}}$

$a_n= (\alpha^n - \beta ^n )/ \sqrt{5}$

### 整数拆分

- 有序分拆(Composition)

  n的有序r拆分的个数是**C(n-1,r-1)**
  n个球，要分成r份，用r-1个隔板插入到球之间的n-1个空隙，方案数C(n-1,r-1)

- 无序分拆(Partition)

  整数拆分(partition of a positive integer n )即把整数分解成若干整数的和，相当于把**n个无区别的球**放到**n个无标志**的盒子，盒子允许空着，也允许放多于一个球。整数拆分成若干整数的和，办法不一，不同拆分法的总数叫做拆分数。

$G(x) = (1+x+x^2 +x^3 +...)(1+x^2+x^4 +...)...(1+x^m+x^{2m})$分别对应1、2到m的母函数。1出现1次、2次...；2出现的次数；m出现的次数。

将n个无区别的球放入m个有区别的盒子中$(n \geq m)$，不容许有空盒，共有多少种方案？

>  方案数$a_n$的母函数：$G(x) = (x + x^2 +x^3 + ...)(x + x^2 +x^3 + ...)..m项...(x + x^2 +x^3 + ...) = \frac {x^m} {(1-x)^m}$ 
>
> 且$(1-x)^{-m } = 1+ mx + \frac{m(m+1)}{2!}x^2 +  \frac{m(m+1)(m+2)}{3!}x^2 + ...$
>
> 其中$x^{n-m}$项的系数为：
>
> $\frac{m(m+1)(m+2)...(m+n-m-1)}{(m-1)!(n-m)!} = \frac{m(m+1)...(n-1)}{(n-m)!}  = \frac{(n-1)!}{(m-1)!(n-m)!}  = C(n-1,m-1)$

### 容斥定理

$|A\cup B \cup C | = |A| +|B| + |C| - |A\cap B|  - |A\cap C|  - |B\cap C| +|A \cap B\cap C|$

$A_1 \cup A_2 \cup ... \cup A_n   = \displaystyle\sum_{i=1}^n |Ai| - \displaystyle\sum_{i=1}^n  \displaystyle\sum_{j>i} |A_i \cap A_j|   +  \displaystyle\sum_{i=1}^n  \displaystyle\sum_{j>i} \displaystyle\sum_{k>j}|A_i \cap A_j \cap A_j|  +.... + (-1)^{n-1}|A_1 \cap A_2 \cap ... \cap A_n| $

### 错排问题

1，2，3，....，n的全排列中每个元素都不在各自位置上的排列数：

$D_n = | \overline{A_1} \cap \overline{A_2} \cap ... \cap \overline{A_n} |   = n! - C(n,1)(n-1)! + C(n,2)(n-2)!  + ... \pm C(n,n)1!$

$= n! (1 - \frac {1} {1!} + \frac {1} {2!})  +... \pm \frac {1} {n!}$
